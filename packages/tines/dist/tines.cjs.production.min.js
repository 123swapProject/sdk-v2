"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t,e=require("@ethersproject/bignumber");function r(){return(r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(t[o]=r[o])}return t}).apply(this,arguments)}function o(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function n(t){return(n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function i(t,e){return(i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function s(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}function u(t,e,r){return(u=s()?Reflect.construct:function(t,e,r){var o=[null];o.push.apply(o,e);var n=new(Function.bind.apply(t,o));return r&&i(n,r.prototype),n}).apply(null,arguments)}function a(t){var e="function"==typeof Map?new Map:void 0;return(a=function(t){if(null===t||-1===Function.toString.call(t).indexOf("[native code]"))return t;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return u(t,arguments,n(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),i(r,t)})(t)}(t=exports.PoolType||(exports.PoolType={})).ConstantProduct="ConstantProduct",t.Weighted="Weighted",t.Hybrid="Hybrid",t.ConcentratedLiquidity="ConcentratedLiquidity";var c,v=function(t){var e=r({minLiquidity:1e3,swapGasCost:4e4},t);this.address=e.address,this.token0=e.token0,this.token1=e.token1,this.type=e.type,this.reserve0=e.reserve0,this.reserve1=e.reserve1,this.fee=e.fee,this.minLiquidity=e.minLiquidity,this.swapGasCost=e.swapGasCost},h=function(t){function e(e){return t.call(this,r({type:exports.PoolType.ConstantProduct},e))||this}return o(e,t),e}(v),p=function(t){function e(e){var o;return(o=t.call(this,r({type:exports.PoolType.Hybrid},e))||this).A=e.A,o}return o(e,t),e}(v),f=function(t){function e(e){var o;return(o=t.call(this,r({type:exports.PoolType.Weighted},e))||this).weight0=e.weight0,o.weight1=e.weight1,o}return o(e,t),e}(v),l=function(t){function n(o){var n;return(n=t.call(this,r({type:exports.PoolType.ConcentratedLiquidity,reserve0:e.BigNumber.from(0),reserve1:e.BigNumber.from(0)},o))||this).liquidity=o.liquidity,n.sqrtPrice=o.sqrtPrice,n.nearestTick=o.nearestTick,n.ticks=o.ticks,n}return o(n,t),n}(v);(c=exports.RouteStatus||(exports.RouteStatus={})).Success="Success",c.NoWay="NoWay",c.Partial="Partial";var d=new Map;function g(t){var r=d.get(t);if(void 0!==r)return r;var o=t.reserve0,n=t.reserve1;if(o.isZero()&&n.isZero())return d.set(t,e.BigNumber.from(0)),e.BigNumber.from(0);for(var i,s=o.add(n),u=e.BigNumber.from(2*t.A),a=s,c=0;c<256;c++){var v=a.mul(a).div(o).mul(a).div(n).div(4);if(i=a,(a=u.mul(s).div(100).add(v.mul(2)).mul(a).div(u.div(100).sub(1).mul(a).add(v.mul(3)))).sub(i).abs().lte(1))break}return d.set(t,a),a}function m(t,e){for(var r,o=g(t),n=2*t.A,i=o.mul(o).div(e.mul(2)).mul(o).div(2*n/100),s=o.mul(100).div(n).add(e),u=o,a=0;a<256&&(r=u,!(u=u.mul(u).add(i).div(u.mul(2).add(s).sub(o))).sub(r).abs().lte(1));a++);return u}function P(t,e,r){void 0===r&&(r=!0);var o=r?t.reserve0:t.reserve1,n=r?t.reserve1:t.reserve0;switch(t.type){case exports.PoolType.ConstantProduct:var i=parseInt(o.toString());return parseInt(n.toString())*e/(i/(1-t.fee)+e);case exports.PoolType.Weighted:var s=parseInt(o.toString());return parseInt(n.toString())*(1-Math.pow(s/(s+e*(1-t.fee)),r?t.weight0/t.weight1:t.weight1/t.weight0));case exports.PoolType.Hybrid:var u=m(t,o.add(w(void 0,e*(1-t.fee))));return parseInt(n.sub(u).toString());case exports.PoolType.ConcentratedLiquidity:return function(t,e,r){if(0===t.ticks.length)return 0;t.ticks[0].index>-887272&&t.ticks.unshift({index:-887272,DLiquidity:0}),t.ticks[t.ticks.length-1].index<887271&&t.ticks.push({index:887271,DLiquidity:0});for(var o=r?t.nearestTick:t.nearestTick+1,n=t.sqrtPrice,i=t.liquidity,s=0,u=e;u>0;){if(o<0||o>=t.ticks.length)throw new I;var a=Math.sqrt(Math.pow(1.0001,t.ticks[o].index)),c=0;if(r){var v=i*(n-a)/n/a;u<=v?(c=i*n*u/(u+i/n),u=0):(c=i*(n-a),n=a,u-=v,t.ticks[o].index%2==0?i-=t.ticks[o].DLiquidity:i+=t.ticks[o].DLiquidity,o--)}else{var h=i*(a-n);u<=h?(c=u/n/(n+u/i),u=0):(c=i*(a-n)/n/a,n=a,u-=h,t.ticks[o].index%2==0?i+=t.ticks[o].DLiquidity:i-=t.ticks[o].DLiquidity,o++)}s+=c*(1-t.fee)}return s}(t,e,r)}}var I=function(t){function e(){return t.apply(this,arguments)||this}return o(e,t),e}(a(Error));function b(t,r,o){var n=0,i=o?t.reserve0:t.reserve1,s=o?t.reserve1:t.reserve0;switch(t.type){case exports.PoolType.ConstantProduct:var u=parseInt(i.toString()),a=parseInt(s.toString());n=u*r/(1-t.fee)/(a-r);break;case exports.PoolType.Weighted:var c=parseInt(i.toString()),v=parseInt(s.toString());n=c*(1-t.fee)*(Math.pow(1-r/v,-(o?t.weight0/t.weight1:t.weight1/t.weight0))-1);break;case exports.PoolType.Hybrid:var h=s.sub(w(void 0,r));h.lt(1)&&(h=e.BigNumber.from(1));var p=m(t,h);n=Math.round(parseInt(p.sub(i).toString())/(1-t.fee));break;default:console.error("Unknown pool type")}return n<1&&(n=1),n}function y(t,e,r){void 0===r&&(r=!0);var o=parseInt(t.reserve0.toString()),n=parseInt(t.reserve1.toString()),i=r?1-t.fee:1;switch(t.type){case exports.PoolType.ConstantProduct:var s=o/i;return n*s/(s+e)/(s+e);case exports.PoolType.Weighted:var u=t.weight0/t.weight1,a=o+e*i;return n*u*i*Math.pow(o/a,u)/a;case exports.PoolType.Hybrid:var c=t,v=parseInt(g(c).toString()),h=c.A/100,p=o+e,f=4*h*p+v-4*h*v,l=v*v*v/p;return(.5-(2*f-l/p)/Math.sqrt(f*f+4*h*l)/4)*i}return 0}function S(t,e){!t()&&e&&console.error(e)}function k(t,e,r){return 0===r?t===e:t<1/r?Math.abs(t-e)<=10:Math.abs(t/e-1)<r}function E(t,e,r){void 0===r&&(r=1);try{if(e<=t(0))return 0;var o,n;if(t(r)>e){for(o=r/2;t(o)>e;)o/=2;n=2*o}else{for(n=2*r;t(n)<e;)n*=2;o=n/2}for(;n/o-1>1e-4;){var i=(o+n)/2,s=t(i);if(e===s)return i;e<s?n=i:o=i}return(o+n)/2}catch(t){return 0}}function w(t,r){if(void 0!==t)return t;if(r<Number.MAX_SAFE_INTEGER)return e.BigNumber.from(Math.round(r));var o=Math.floor(Math.log(r)/Math.LN2);console.assert(o>=51,"Internal Error 314");var n=o-51,i=Math.round(r/Math.pow(2,n));return e.BigNumber.from(i).mul(e.BigNumber.from(2).pow(n))}var O=function(){function t(t,e,r){this.GasConsumption=4e4,this.MINIMUM_LIQUIDITY=1e3,this.pool=t,this.vert0=e,this.vert1=r,this.amountInPrevious=0,this.amountOutPrevious=0,this.canBeUsed=!0,this.direction=!0,this.bestEdgeIncome=0}var e=t.prototype;return e.reserve=function(t){return t===this.vert0?this.pool.reserve0:this.pool.reserve1},e.calcOutput=function(t,e){var r,o=this.pool,n=this.amountInPrevious?0:this.GasConsumption;return t===this.vert1?this.direction?(r=e<this.amountOutPrevious?this.amountInPrevious-b(o,this.amountOutPrevious-e,!0):P(o,e-this.amountOutPrevious,!1)+this.amountInPrevious,e===this.amountOutPrevious&&(n=-this.GasConsumption)):r=P(o,this.amountOutPrevious+e,!1)-this.amountInPrevious:this.direction?r=P(o,this.amountInPrevious+e,!0)-this.amountOutPrevious:(e===this.amountInPrevious&&(n=-this.GasConsumption),r=e<this.amountInPrevious?this.amountOutPrevious-b(o,this.amountInPrevious-e,!1):P(o,e-this.amountInPrevious,!0)+this.amountOutPrevious),[r,n]},e.checkMinimalLiquidityExceededAfterSwap=function(t,e){if(t===this.vert0){var r=parseInt(this.pool.reserve1.toString());return this.direction?r-e-this.amountOutPrevious<this.MINIMUM_LIQUIDITY:r-e+this.amountOutPrevious<this.MINIMUM_LIQUIDITY}var o=parseInt(this.pool.reserve0.toString());return this.direction?o-e+this.amountInPrevious<this.MINIMUM_LIQUIDITY:o-e-this.amountInPrevious<this.MINIMUM_LIQUIDITY},e.testApply=function(t,e,r){console.assert(this.amountInPrevious*this.amountOutPrevious>=0);var o,n=this.direction?this.amountInPrevious:-this.amountInPrevious,i=this.direction?this.amountOutPrevious:-this.amountOutPrevious,s=0,u=0;if(t.getNeibour(this)){var a=n+(t===this.vert0?e:-r),c=i+(t===this.vert0?r:-e);a*c<0&&console.log("333"),console.assert(a*c>=0),a>=0?(o=!0,s=a,u=c):(o=!1,s=-a,u=-c)}else console.error("Error 221");if(o){var v=P(this.pool,s,o),h=k(u,v,1e-6);return h||console.log("Err 225-1 !!",u,v,Math.abs(v/u-1)),h}var p=P(this.pool,u,o),f=k(s,p,1e-6);return f||console.log("Err 225-2!!",s,p,Math.abs(p/s-1)),f},e.applySwap=function(t){var e=this;console.assert(this.amountInPrevious*this.amountOutPrevious>=0);var r=this.direction?this.amountInPrevious:-this.amountInPrevious,o=this.direction?this.amountOutPrevious:-this.amountOutPrevious,n=t.getNeibour(this);if(n){var i=r+(t===this.vert0?t.bestIncome:-n.bestIncome),s=o+(t===this.vert0?n.bestIncome:-t.bestIncome);console.assert(i*s>=0),i>=0?(this.direction=!0,this.amountInPrevious=i,this.amountOutPrevious=s):(this.direction=!1,this.amountInPrevious=-i,this.amountOutPrevious=-s)}else console.error("Error 221");S((function(){return e.direction?k(e.amountOutPrevious,P(e.pool,e.amountInPrevious,e.direction),1e-6):k(e.amountInPrevious,P(e.pool,e.amountOutPrevious,e.direction),1e-6)}),"Error 225")},t}(),x=function(){function t(t){this.token=t,this.edges=[],this.price=0,this.gasPrice=0,this.bestIncome=0,this.gasSpent=0,this.bestTotal=0,this.bestSource=void 0,this.checkLine=-1}return t.prototype.getNeibour=function(t){if(t)return t.vert0===this?t.vert1:t.vert0},t}(),M=function(){function t(t,e,r){var o=this;this.vertices=[],this.edges=[],this.tokens=new Map,t.forEach((function(t){var e=o.getOrCreateVertice(t.token0),r=o.getOrCreateVertice(t.token1),n=new O(t,e,r);e.edges.push(n),r.edges.push(n),o.edges.push(n)}));var n=this.tokens.get(e);n&&this.setPrices(n,1,r)}var e=t.prototype;return e.setPrices=function(t,e,r){var o=this;0===t.price&&(t.price=e,t.gasPrice=r,t.edges.map((function(e){return[e,parseInt(e.reserve(t).toString())]})).sort((function(t,e){return e[1]-t[1]})).forEach((function(n){var i=n[0],s=i.vert0===t?i.vert1:i.vert0;if(0===s.price){var u=y(i.pool,0,!1);t===i.vert0&&(u=1/u),o.setPrices(s,e*u,r/u)}})))},e.getOrCreateVertice=function(t){var e=this.tokens.get(t);return e||(e=new x(t),this.vertices.push(e),this.tokens.set(t,e),e)},e.exportPath=function(t,e){for(var r=this.tokens.get(t),o=this.tokens.get(e),n=r.bestIncome*r.price/o.price,i=new Set,s=o;s!==r;s=s.getNeibour(s.bestSource))s.bestSource&&i.add(s.bestSource);function u(t,e){var r;if(0===t)r="0";else{var o=t>0?t:-t,n=e-Math.ceil(Math.log(o)/Math.LN10);if(n<=0)r=""+Math.round(o);else{var i=Math.pow(10,n);r=""+Math.round(o*i)/i}t<0&&(r=-r)}return r}var a="var nodes = new vis.DataSet([\n      "+this.vertices.map((function(t){return"{ id: "+t.token.name+', label: "'+function(t){var e=""+u(t.bestIncome*t.price/o.price,3),r=""+u(t.bestTotal,3);return[-1===t.checkLine?void 0:""+t.checkLine,e,r].filter((function(t){return void 0!==t})).join(":")}(t)+'"}'})).join(",\n\t\t")+"\n    ]);\n",c="var edges = new vis.DataSet([\n      "+this.edges.map((function(t){return"{ from: "+t.vert0.token.name+", to: "+t.vert1.token.name+(s=(e=t).vert1.bestSource===e,a=e.vert0.bestSource===e,-1===e.bestEdgeIncome&&(r='label: "low_liq"'),0!==e.bestEdgeIncome&&(r='label: "'+u(100*(e.bestEdgeIncome/n-1),3)+'%"'),s&&a&&(o='arrows: "from,to"'),s&&(o='arrows: "to"'),a&&(o='arrows: "from"'),["",r,i.has(e)?"value: 2":void 0,o].filter((function(t){return void 0!==t})).join(", ")+"}");var e,r,o,s,a})).join(",\n\t\t")+"\n    ]);\n";require("fs").writeFileSync("D:/Info/Notes/GraphVisualization/data.js",a+c+"var data = {\n        nodes: nodes,\n        edges: edges,\n    };\n")},e.findBestPath=function(t,e,r){var o=this.tokens.get(t),n=this.tokens.get(e);if(o&&n){this.edges.forEach((function(t){return t.bestEdgeIncome=0})),this.vertices.forEach((function(t){t.bestIncome=0,t.gasSpent=0,t.bestTotal=0,t.bestSource=void 0,t.checkLine=-1})),o.bestIncome=r,o.bestTotal=r;for(var i=new Set,s=[o],u=0,a=function(){var t=void 0,e=-1,r=0;if(s.forEach((function(o,n){o.bestTotal>e&&(e=o.bestTotal,t=o,r=n)})),!t)return{v:void 0};if(t.checkLine=u++,t===n){for(var o=[],a=n;null!=(c=a)&&c.bestSource;a=a.getNeibour(a.bestSource)){var c;o.unshift(a.bestSource)}return{v:{path:o,output:n.bestIncome,gasSpent:n.gasSpent,totalOutput:n.bestTotal}}}s.splice(r,1),t.edges.forEach((function(e){var r=t===e.vert0?e.vert1:e.vert0;if(!i.has(r)){var o,u;try{var a=e.calcOutput(t,t.bestIncome);o=a[0],u=a[1]}catch(e){return}if(e.checkMinimalLiquidityExceededAfterSwap(t,o))e.bestEdgeIncome=-1;else{var c=t.gasSpent+u,v=r.price/n.price,h=o*v-c*n.gasPrice;console.assert(0===e.bestEdgeIncome,"Error 373"),e.bestEdgeIncome=o*v,r.bestSource||s.push(r),(!r.bestSource||h>r.bestTotal)&&(r.bestIncome=o,r.gasSpent=c,r.bestTotal=h,r.bestSource=e)}}})),i.add(t)};;){var c=a();if("object"==typeof c)return c.v}}},e.addPath=function(t,e,r){var o=this,n=t;r.forEach((function(t){n?(t.applySwap(n),n=n.getNeibour(t)):console.error("Unexpected 315")})),S((function(){return o.vertices.every((function(r){var o=0,n=0;return r.edges.forEach((function(t){t.vert0===r?(t.direction?o-=t.amountInPrevious:o+=t.amountInPrevious,n+=t.amountInPrevious):(t.direction?o+=t.amountOutPrevious:o-=t.amountOutPrevious,n+=t.amountOutPrevious)})),r===t?o<=0:r===e?o>=0:0===n?0===o:Math.abs(o/n)<1e10}))}),"Error 290")},e.findBestRoute=function(t,e,r,o){var n=[];if(Array.isArray(o)){var i=o.reduce((function(t,e){return t+e}),0);n=o.map((function(t){return t/i}))}else for(var s=0;s<o;++s)n.push(1/o);this.edges.forEach((function(t){t.amountInPrevious=0,t.amountOutPrevious=0,t.direction=!0}));var u,a,c=0,v=0,h=0;for(u=0;u<n.length;++u){var p=this.findBestPath(t,e,r*n[u]);if(!p)break;c+=p.output,v+=p.gasSpent,this.addPath(this.tokens.get(t),this.tokens.get(e),p.path),h+=n[u]}if(0==u)return{status:exports.RouteStatus.NoWay,amountIn:0,amountOut:0,legs:[],gasSpent:0,totalAmountOut:0};a=u<n.length?exports.RouteStatus.Partial:exports.RouteStatus.Success;var f=this.tokens.get(t),l=this.tokens.get(e),d=this.getRouteLegs(f,l),g=d[0],m=d[1],P=d[2];return console.assert(m<=v,"Internal Error 491"),P&&(c=this.calcLegsAmountOut(g,r,e)),{status:a,amountIn:r*h,amountOut:c,legs:g,gasSpent:m,totalAmountOut:c-m*l.gasPrice}},e.getRouteLegs=function(t,e){var r=this,o=this.cleanTopology(t,e),n=o[1],i=[],s=0;return o[0].forEach((function(t){var e=r.getOutputEdges(t).map((function(t){var e=r.edgeFrom(t);return e?[t,e[0],e[1]]:[t]})),o=e.reduce((function(t,e){return t+e[2]}),0);if(!(o<=0)){var n=o;e.forEach((function(r,u){var a=r[2];i.push({address:r[0].pool.address,token:t.token,swapPortion:u+1===e.length?1:a/o,absolutePortion:a/n}),s+=r[0].pool.swapGasCost,o-=a})),console.assert(o/n<1e-12,"Error 281")}})),[i,s,n]},e.edgeFrom=function(t){if(0!==t.amountInPrevious)return t.direction?[t.vert0,t.amountInPrevious]:[t.vert1,t.amountOutPrevious]},e.getOutputEdges=function(t){return t.edges.filter((function(e){return!!e.canBeUsed&&0!==e.amountInPrevious&&e.direction===(e.vert0===t)}))},e.getInputEdges=function(t){return t.edges.filter((function(e){return!!e.canBeUsed&&0!==e.amountInPrevious&&e.direction!==(e.vert0===t)}))},e.calcLegsAmountOut=function(t,e,r){var o=this,n=new Map;return n.set(t[0].token,e),t.forEach((function(t){var e=o.tokens.get(t.token);console.assert(void 0!==e,"Internal Error 570");var r=e.edges.find((function(e){return e.pool.address===t.address}));console.assert(void 0!==r,"Internel Error 569");var i=r.pool,s=e===r.vert0,u=n.get(t.token);console.assert(void 0!==u,"Internal Error 564");var a=u*t.swapPortion;n.set(t.token,u-a);var c=P(i,a,s),v=e.getNeibour(r),h=n.get(v.token);n.set(v.token,(h||0)+c)})),n.get(r)||0},e.cleanTopology=function(t,e){var r=!1,o=this.topologySort(t,e);if(2!==o[0]){for(r=!0,console.assert(0===o[0],"Internal Error 554");0===o[0];)this.removeWeakestEdge(o[1]),o=this.topologySort(t,e);if(3===o[0]&&(this.removeDeadEnds(o[1]),o=this.topologySort(t,e)),console.assert(2===o[0],"Internal Error 563"),2!==o[0])return[[],r]}return[o[1],r]},e.removeDeadEnds=function(t){var e=this;t.forEach((function(t){e.getInputEdges(t).forEach((function(t){t.canBeUsed=!1}))}))},e.removeWeakestEdge=function(t){var e,r,o=this,n=Number.MAX_VALUE;t.forEach((function(i,s){var u=0===s?t[t.length-1]:t[s-1],a=0;o.getOutputEdges(i).forEach((function(t){i.getNeibour(t)===u&&(a+=t.direction?t.amountOutPrevious:t.amountInPrevious)})),a<n&&(e=i,r=u,n=a)})),this.getOutputEdges(e).forEach((function(t){e.getNeibour(t)===r&&(t.canBeUsed=!1)}))},e.topologySort=function(t,e){var r=new Map,o=[],n=[],i=[],s=this,u=function t(u){var a=r.get(u);if(2===a||3===a)return a;if(1===a)return console.assert(0==n.length,"Internal Error 566"),n.push(u),1;r.set(u,1);for(var c=!1,v=s.getOutputEdges(u),h=0;h<v.length;++h){var p=t(u.getNeibour(v[h]));if(0===p)return 0;if(1===p)return n[0]===u?0:(n.push(u),1);2===p&&(c=!0)}return c?(console.assert(u!==e,"Internal Error 589"),o.push(u),r.set(u,2),2):u!==e?(i.push(u),r.set(u,3),3):(o.push(u),r.set(u,2),2)}(t);return 0===u?[0,n]:i.length?[3,i]:(S((function(){return o[0]===e&&o[o.length-1]===t}),"Internal Error 614"),2===u?[2,o.reverse()]:(console.assert(!0,"Internal Error 612"),[1,[]]))},t}();exports.ASSERT=S,exports.CL_MAX_TICK=887271,exports.CL_MIN_TICK=-887272,exports.Edge=O,exports.Graph=M,exports.HybridComputeLiquidity=g,exports.HybridgetY=m,exports.OutOfLiquidity=I,exports.Pool=v,exports.RConcentratedLiquidityPool=l,exports.RConstantProductPool=h,exports.RHybridPool=p,exports.RWeightedPool=f,exports.Vertice=x,exports.calcInByOut=b,exports.calcInputByPrice=function(t,e,r){switch(void 0===r&&(r=1),t.type){case exports.PoolType.ConstantProduct:var o=parseInt(t.reserve0.toString()),n=parseInt(t.reserve1.toString()),i=o/(1-t.fee);return Math.sqrt(n*i*e)-i;case exports.PoolType.Weighted:return function(t,e){var r=parseInt(t.reserve0.toString()),o=parseInt(t.reserve1.toString()),n=t.weight0/t.weight1,i=o*e*n*(1-t.fee)*Math.pow(r,n);return(Math.pow(i,1/(n+1))-r)/(1-t.fee)}(t,e);case exports.PoolType.Hybrid:return E((function(e){return 1/y(t,e)}),e,r)}return 0},exports.calcOutByIn=P,exports.calcPrice=y,exports.calcSquareEquation=function(t,e,r){var o=e*e-4*t*r;console.assert(o>=0,"Discriminant is negative! "+t+" "+e+" "+r);var n=Math.sqrt(o);return[(-e-n)/2/t,(-e+n)/2/t]},exports.closeValues=k,exports.findMultiRouting=function(t,e,r,o,n,i,s){void 0===s&&(s=12);var u=new M(o,n,i),a=u.tokens.get(t);return 0===(null==a?void 0:a.price)&&u.setPrices(a,1,0),u.findBestRoute(t,e,r,s)},exports.getBigNumber=w,exports.revertPositive=E;
//# sourceMappingURL=tines.cjs.production.min.js.map
